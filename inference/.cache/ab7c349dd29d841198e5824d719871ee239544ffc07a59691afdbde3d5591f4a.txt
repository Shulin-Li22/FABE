import os
import shutil

def copy_dir_all_files_to_directory(base_dir_str, dest_dir_str):
    plus_quota_size = 0
    if base_dir_str.endswith(os.sep):
        base_dir_str = base_dir_str[:-1]
    if dest_dir_str.endswith(os.sep):
        dest_dir_str = dest_dir_str[:-1]
    if not os.path.exists(dest_dir_str):
        os.makedirs(dest_dir_str)
    if os.path.exists(base_dir_str) and os.path.isdir(base_dir_str):
        entry_list = os.listdir(base_dir_str)
        if entry_list:
            for entry_name in entry_list:
                old_path_file_name = os.path.join(base_dir_str, entry_name)
                if os.path.isfile(old_path_file_name):
                    new_path_file_name = os.path.join(dest_dir_str, entry_name)
                    if os.path.exists(new_path_file_name):
                        plus_quota_size -= os.path.getsize(new_path_file_name)
                        os.remove(new_path_file_name)
                    with open(old_path_file_name, 'rb') as in_file, open(new_path_file_name, 'wb') as out_file:
                        data_buff = in_file.read(buffer_size)
                        while data_buff:
                            out_file.write(data_buff)
                            plus_quota_size += len(data_buff)
                            data_buff = in_file.read(buffer_size)
    else:
        raise Exception(f"Base dir not exist ! baseDirStr = ({base_dir_str})")
    return plus_quota_size
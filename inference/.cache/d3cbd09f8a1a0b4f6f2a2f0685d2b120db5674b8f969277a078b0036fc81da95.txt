import urllib.request
import os

def suckstream(stream):
    # Assuming suckstream is a function that reads from a stream and returns a byte array
    pass

def startzm():
    myzzurl = None
    myzstream = None
    zmemimage = None
    joined = False

    try:
        print(zcodefile)
        myzzurl = urllib.request.urlopen(zcodefile)
        myzstream = myzzurl.read()
        zmemimage = suckstream(myzstream)
    except Exception as booga:
        try:
            myzstream = open(zcodefile, 'rb')
            zmemimage = suckstream(myzstream)
        except Exception as booga2:
            failed = True

    if zmemimage is not None:
        if zmemimage[0] == 3:
            zm = ZMachine3(screen, status_line, zmemimage)
        elif zmemimage[0] == 5:
            remove(status_line)
            zm = ZMachine5(screen, zmemimage)
        elif zmemimage[0] == 8:
            remove(status_line)
            zm = ZMachine8(screen, zmemimage)
        else:
            failed = True

        if zm is not None:
            zm.start()

        joined = False

        if zmemimage is not None:
            while not joined:
                try:
                    zm.join()
                    joined = True
                except Exception as booga:
                    pass

    os.exit(0)